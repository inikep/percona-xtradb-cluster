CREATE TABLE t1 (f1 INTEGER PRIMARY KEY AUTO_INCREMENT, f2 LONGBLOB);
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_size=2M;gcache.keep_pages_count=0';
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_size=2M;gcache.keep_pages_count=0';
INSERT INTO t1(f2) VALUES(REPEAT('x', 4));
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_size=0;gcache.keep_pages_count=2';
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_size=0;gcache.keep_pages_count=2';
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
SET GLOBAL wsrep_provider_options = 'gcache.page_size=4M';
SET GLOBAL wsrep_provider_options = 'gcache.page_size=4M';
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 4000000));
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_size=3M;gcache.keep_pages_count=2';
SET GLOBAL wsrep_provider_options = 'gcache.page_size=1M';
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_size=3M;gcache.keep_pages_count=2';
SET GLOBAL wsrep_provider_options = 'gcache.page_size=1M';
INSERT INTO t1(f2) VALUES(REPEAT('x', 1000000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 1000000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 1000000));
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_count=3;gcache.keep_pages_size=2M;';
SET GLOBAL wsrep_provider_options = 'gcache.page_size=1M';
SET GLOBAL wsrep_provider_options = 'gcache.keep_pages_count=3;gcache.keep_pages_size=2M;';
SET GLOBAL wsrep_provider_options = 'gcache.page_size=1M';
INSERT INTO t1(f2) VALUES(REPEAT('x', 1500000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 1500000));
INSERT INTO t1(f2) VALUES(REPEAT('x', 1500000));
DROP TABLE t1;
