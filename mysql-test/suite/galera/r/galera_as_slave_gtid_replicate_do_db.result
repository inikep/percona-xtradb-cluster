RESET MASTER;
SET SESSION wsrep_on=OFF;
RESET MASTER;
SET SESSION wsrep_on=ON;
SET SESSION wsrep_on=OFF;
RESET MASTER;
SET SESSION wsrep_on=ON;
START SLAVE USER='root';
Warnings:
Note	1759	Sending passwords in plain text without SSL/TLS is extremely insecure.
CREATE SCHEMA test1;
CREATE SCHEMA test2;
USE test1;
CREATE TABLE t1 (f1 INTEGER PRIMARY KEY,f2 CHAR(5) DEFAULT 'abc') ENGINE=InnoDB;
USE test2;
CREATE TABLE t1 (f1 INTEGER PRIMARY KEY,f2 CHAR(5) DEFAULT 'abc') ENGINE=InnoDB;
INSERT INTO test1.t1 (f1) VALUES (1);
INSERT INTO test2.t1 (f1) VALUES (1);
INSERT INTO test1.t1 (f1) VALUES (2);
INSERT INTO test2.t1 (f1) VALUES (2);
INSERT INTO test1.t1 (f1) VALUES (3);
INSERT INTO test2.t1 (f1) VALUES (3);
UPDATE test2.t1 SET test2.t1.f2 = 'cde';
UPDATE test1.t1, test2.t1 SET test1.t1.f2 = 'klm', test2.t1.f2 = 'xyz';
DELETE test1.t1, test2.t1 FROM test1.t1 INNER JOIN test2.t1 WHERE test1.t1.f1 = test2.t1.f1 AND test1.t1.f1 = 3;
SET AUTOCOMMIT=OFF;
START TRANSACTION;
INSERT INTO test2.t1 (f1) VALUES (999);
INSERT INTO test2.t1 (f1) VALUES (9999);
COMMIT;
START TRANSACTION;
INSERT INTO test1.t1 (f1) VALUES (111);
INSERT INTO test1.t1 (f1) VALUES (222);
COMMIT;
START TRANSACTION;
INSERT INTO test1.t1 (f1) VALUES (333);
INSERT INTO test2.t1 (f1) VALUES (99999);
COMMIT;
SHOW BINLOG EVENTS IN 'mysqld-bin.000001' FROM 124;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
mysqld-bin.000001	124	Previous_gtids	2	155	
mysqld-bin.000001	155	Gtid	1	235	SET @@SESSION.GTID_NEXT= '<effective_uuid>:1'
mysqld-bin.000001	235	Query	1	344	CREATE SCHEMA test1 /* xid=### */
mysqld-bin.000001	344	Gtid	1	424	SET @@SESSION.GTID_NEXT= '<effective_uuid>:2'
mysqld-bin.000001	424	Query	1	502	BEGIN
mysqld-bin.000001	502	Query	1	581	COMMIT
mysqld-bin.000001	581	Gtid	1	661	SET @@SESSION.GTID_NEXT= '<effective_uuid>:3'
mysqld-bin.000001	661	Query	1	830	use `test1`; CREATE TABLE t1 (f1 INTEGER PRIMARY KEY,f2 CHAR(5) DEFAULT 'abc') ENGINE=InnoDB /* xid=### */
mysqld-bin.000001	830	Gtid	1	910	SET @@SESSION.GTID_NEXT= '<effective_uuid>:4'
mysqld-bin.000001	910	Query	1	988	BEGIN
mysqld-bin.000001	988	Query	1	1067	COMMIT
mysqld-bin.000001	1067	Gtid	1	1149	SET @@SESSION.GTID_NEXT= '<effective_uuid>:5'
mysqld-bin.000001	1149	Query	1	1222	BEGIN
mysqld-bin.000001	1222	Table_map	1	1279	table_id: ### (test1.t1)
mysqld-bin.000001	1279	Write_rows	1	1323	table_id: ### flags: STMT_END_F
mysqld-bin.000001	1323	Xid	1	1354	COMMIT /* xid=### */
mysqld-bin.000001	1354	Gtid	1	1434	SET @@SESSION.GTID_NEXT= '<effective_uuid>:6'
mysqld-bin.000001	1434	Query	1	1502	BEGIN
mysqld-bin.000001	1502	Query	1	1571	COMMIT
mysqld-bin.000001	1571	Gtid	1	1653	SET @@SESSION.GTID_NEXT= '<effective_uuid>:7'
mysqld-bin.000001	1653	Query	1	1726	BEGIN
mysqld-bin.000001	1726	Table_map	1	1783	table_id: ### (test1.t1)
mysqld-bin.000001	1783	Write_rows	1	1827	table_id: ### flags: STMT_END_F
mysqld-bin.000001	1827	Xid	1	1858	COMMIT /* xid=### */
mysqld-bin.000001	1858	Gtid	1	1938	SET @@SESSION.GTID_NEXT= '<effective_uuid>:8'
mysqld-bin.000001	1938	Query	1	2006	BEGIN
mysqld-bin.000001	2006	Query	1	2075	COMMIT
mysqld-bin.000001	2075	Gtid	1	2157	SET @@SESSION.GTID_NEXT= '<effective_uuid>:9'
mysqld-bin.000001	2157	Query	1	2230	BEGIN
mysqld-bin.000001	2230	Table_map	1	2287	table_id: ### (test1.t1)
mysqld-bin.000001	2287	Write_rows	1	2331	table_id: ### flags: STMT_END_F
mysqld-bin.000001	2331	Xid	1	2362	COMMIT /* xid=### */
mysqld-bin.000001	2362	Gtid	1	2442	SET @@SESSION.GTID_NEXT= '<effective_uuid>:10'
mysqld-bin.000001	2442	Query	1	2510	BEGIN
mysqld-bin.000001	2510	Query	1	2579	COMMIT
mysqld-bin.000001	2579	Gtid	1	2659	SET @@SESSION.GTID_NEXT= '<effective_uuid>:11'
mysqld-bin.000001	2659	Query	1	2727	BEGIN
mysqld-bin.000001	2727	Query	1	2796	COMMIT
mysqld-bin.000001	2796	Gtid	1	2878	SET @@SESSION.GTID_NEXT= '<effective_uuid>:12'
mysqld-bin.000001	2878	Query	1	2951	BEGIN
mysqld-bin.000001	2951	Table_map	1	3008	table_id: ### (test1.t1)
mysqld-bin.000001	3008	Update_rows	1	3098	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3098	Xid	1	3129	COMMIT /* xid=### */
mysqld-bin.000001	3129	Gtid	1	3211	SET @@SESSION.GTID_NEXT= '<effective_uuid>:13'
mysqld-bin.000001	3211	Query	1	3284	BEGIN
mysqld-bin.000001	3284	Table_map	1	3341	table_id: ### (test1.t1)
mysqld-bin.000001	3341	Delete_rows	1	3385	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3385	Xid	1	3416	COMMIT /* xid=### */
mysqld-bin.000001	3416	Gtid	1	3496	SET @@SESSION.GTID_NEXT= '<effective_uuid>:14'
mysqld-bin.000001	3496	Query	1	3564	BEGIN
mysqld-bin.000001	3564	Query	1	3633	COMMIT
mysqld-bin.000001	3633	Gtid	1	3715	SET @@SESSION.GTID_NEXT= '<effective_uuid>:15'
mysqld-bin.000001	3715	Query	1	3788	BEGIN
mysqld-bin.000001	3788	Table_map	1	3845	table_id: ### (test1.t1)
mysqld-bin.000001	3845	Write_rows	1	3889	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3889	Table_map	1	3946	table_id: ### (test1.t1)
mysqld-bin.000001	3946	Write_rows	1	3990	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3990	Xid	1	4021	COMMIT /* xid=### */
mysqld-bin.000001	4021	Gtid	1	4103	SET @@SESSION.GTID_NEXT= '<effective_uuid>:16'
mysqld-bin.000001	4103	Query	1	4176	BEGIN
mysqld-bin.000001	4176	Table_map	1	4233	table_id: ### (test1.t1)
mysqld-bin.000001	4233	Write_rows	1	4277	table_id: ### flags: STMT_END_F
mysqld-bin.000001	4277	Xid	1	4308	COMMIT /* xid=### */
gtid_executed_equal
1
SHOW BINLOG EVENTS IN 'mysqld-bin.000001' FROM 124;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
mysqld-bin.000001	124	Previous_gtids	3	155	
mysqld-bin.000001	155	Gtid	1	235	SET @@SESSION.GTID_NEXT= '<effective_uuid>:1'
mysqld-bin.000001	235	Query	1	344	CREATE SCHEMA test1 /* xid=### */
mysqld-bin.000001	344	Gtid	1	424	SET @@SESSION.GTID_NEXT= '<effective_uuid>:2'
mysqld-bin.000001	424	Query	1	502	BEGIN
mysqld-bin.000001	502	Query	1	581	COMMIT
mysqld-bin.000001	581	Gtid	1	661	SET @@SESSION.GTID_NEXT= '<effective_uuid>:3'
mysqld-bin.000001	661	Query	1	830	use `test1`; CREATE TABLE t1 (f1 INTEGER PRIMARY KEY,f2 CHAR(5) DEFAULT 'abc') ENGINE=InnoDB /* xid=### */
mysqld-bin.000001	830	Gtid	1	910	SET @@SESSION.GTID_NEXT= '<effective_uuid>:4'
mysqld-bin.000001	910	Query	1	988	BEGIN
mysqld-bin.000001	988	Query	1	1067	COMMIT
mysqld-bin.000001	1067	Gtid	1	1149	SET @@SESSION.GTID_NEXT= '<effective_uuid>:5'
mysqld-bin.000001	1149	Query	1	1222	BEGIN
mysqld-bin.000001	1222	Table_map	1	1279	table_id: ### (test1.t1)
mysqld-bin.000001	1279	Write_rows	1	1323	table_id: ### flags: STMT_END_F
mysqld-bin.000001	1323	Xid	1	1354	COMMIT /* xid=### */
mysqld-bin.000001	1354	Gtid	1	1434	SET @@SESSION.GTID_NEXT= '<effective_uuid>:6'
mysqld-bin.000001	1434	Query	1	1502	BEGIN
mysqld-bin.000001	1502	Query	1	1571	COMMIT
mysqld-bin.000001	1571	Gtid	1	1653	SET @@SESSION.GTID_NEXT= '<effective_uuid>:7'
mysqld-bin.000001	1653	Query	1	1726	BEGIN
mysqld-bin.000001	1726	Table_map	1	1783	table_id: ### (test1.t1)
mysqld-bin.000001	1783	Write_rows	1	1827	table_id: ### flags: STMT_END_F
mysqld-bin.000001	1827	Xid	1	1858	COMMIT /* xid=### */
mysqld-bin.000001	1858	Gtid	1	1938	SET @@SESSION.GTID_NEXT= '<effective_uuid>:8'
mysqld-bin.000001	1938	Query	1	2006	BEGIN
mysqld-bin.000001	2006	Query	1	2075	COMMIT
mysqld-bin.000001	2075	Gtid	1	2157	SET @@SESSION.GTID_NEXT= '<effective_uuid>:9'
mysqld-bin.000001	2157	Query	1	2230	BEGIN
mysqld-bin.000001	2230	Table_map	1	2287	table_id: ### (test1.t1)
mysqld-bin.000001	2287	Write_rows	1	2331	table_id: ### flags: STMT_END_F
mysqld-bin.000001	2331	Xid	1	2362	COMMIT /* xid=### */
mysqld-bin.000001	2362	Gtid	1	2442	SET @@SESSION.GTID_NEXT= '<effective_uuid>:10'
mysqld-bin.000001	2442	Query	1	2510	BEGIN
mysqld-bin.000001	2510	Query	1	2579	COMMIT
mysqld-bin.000001	2579	Gtid	1	2659	SET @@SESSION.GTID_NEXT= '<effective_uuid>:11'
mysqld-bin.000001	2659	Query	1	2727	BEGIN
mysqld-bin.000001	2727	Query	1	2796	COMMIT
mysqld-bin.000001	2796	Gtid	1	2878	SET @@SESSION.GTID_NEXT= '<effective_uuid>:12'
mysqld-bin.000001	2878	Query	1	2951	BEGIN
mysqld-bin.000001	2951	Table_map	1	3008	table_id: ### (test1.t1)
mysqld-bin.000001	3008	Update_rows	1	3098	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3098	Xid	1	3129	COMMIT /* xid=### */
mysqld-bin.000001	3129	Gtid	1	3211	SET @@SESSION.GTID_NEXT= '<effective_uuid>:13'
mysqld-bin.000001	3211	Query	1	3284	BEGIN
mysqld-bin.000001	3284	Table_map	1	3341	table_id: ### (test1.t1)
mysqld-bin.000001	3341	Delete_rows	1	3385	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3385	Xid	1	3416	COMMIT /* xid=### */
mysqld-bin.000001	3416	Gtid	1	3496	SET @@SESSION.GTID_NEXT= '<effective_uuid>:14'
mysqld-bin.000001	3496	Query	1	3564	BEGIN
mysqld-bin.000001	3564	Query	1	3633	COMMIT
mysqld-bin.000001	3633	Gtid	1	3715	SET @@SESSION.GTID_NEXT= '<effective_uuid>:15'
mysqld-bin.000001	3715	Query	1	3788	BEGIN
mysqld-bin.000001	3788	Table_map	1	3845	table_id: ### (test1.t1)
mysqld-bin.000001	3845	Write_rows	1	3889	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3889	Table_map	1	3946	table_id: ### (test1.t1)
mysqld-bin.000001	3946	Write_rows	1	3990	table_id: ### flags: STMT_END_F
mysqld-bin.000001	3990	Xid	1	4021	COMMIT /* xid=### */
mysqld-bin.000001	4021	Gtid	1	4103	SET @@SESSION.GTID_NEXT= '<effective_uuid>:16'
mysqld-bin.000001	4103	Query	1	4176	BEGIN
mysqld-bin.000001	4176	Table_map	1	4233	table_id: ### (test1.t1)
mysqld-bin.000001	4233	Write_rows	1	4277	table_id: ### flags: STMT_END_F
mysqld-bin.000001	4277	Xid	1	4308	COMMIT /* xid=### */
include/diff_servers.inc [servers=2 3]
SELECT COUNT(*) = 2 FROM test1.t1 WHERE f1 IN (1,2);
COUNT(*) = 2
1
SELECT COUNT(*) = 3 FROM test1.t1 WHERE f1 IN (111,222,333);
COUNT(*) = 3
1
SELECT COUNT(*) = 2 FROM test1.t1 WHERE f2 = 'klm';
COUNT(*) = 2
1
USE test2;
ERROR 42000: Unknown database 'test2'
DROP SCHEMA test1;
DROP SCHEMA test2;
STOP SLAVE;
RESET SLAVE ALL;
